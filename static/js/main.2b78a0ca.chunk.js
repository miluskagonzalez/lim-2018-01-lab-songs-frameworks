(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5387:function(t,e,n){t.exports=n(5489)},5489:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(24),i=n.n(o),c=n(10),s=n(75),l=n(76),u=n(79),m=n(77),h=n(80),p=n(3),d=n(18),f=function(t){var e=t.currentArtist,n=t.currentPhoto;return r.a.createElement(a.Fragment,null,r.a.createElement(p.b,null,r.a.createElement(p.c,{component:"img",alt:e,image:n})),r.a.createElement(p.k,{align:"center",gutterBottom:!0,variant:"h5",component:"h2"},e))},k=function(t){var e=t.currentTracklist,n=t.updateLikeCount;return r.a.createElement(p.g,null,e.map(function(t,e){var a=t.name,o=t.likeCount;return r.a.createElement(p.h,{key:a},r.a.createElement(p.i,null,a),r.a.createElement(p.f,{color:"primary",type:"button",onClick:function(){return n(e,1)}},r.a.createElement(d.a,null)),r.a.createElement(p.f,{color:"secondary",type:"button",disabled:!o,onClick:function(){return n(e,-1)}},r.a.createElement(d.d,null)),r.a.createElement(p.k,{variant:"body2"},o))}))},E=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(r)))).state={artists:[],currentPosition:0},n.orderByLikeCount=function(t,e){return e.likeCount-t.likeCount},n.updateCurrentPosition=function(t){n.setState({currentPosition:n.state.currentPosition+t})},n.updateLikeCount=function(t,e){var a=n.state,r=a.artists,o=a.currentPosition;n.setState({artists:r.map(function(n){return r[o]===n&&(n.tracklist[t].likeCount+=e),n})})},n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentWillMount",value:function(){var t=this;fetch("https://ws.audioscrobbler.com/2.0/?method=chart.gettopartists&api_key=bf70ca5a70d643d398b9c06827137ab0&format=json").then(function(t){return t.json()}).then(function(e){var n=e.artists.artist;return Promise.all(n.map(function(e){var n=e.image,a=e.name;return fetch("https://ws.audioscrobbler.com/2.0/?method=artist.gettoptracks&artist=".concat(a,"&api_key=bf70ca5a70d643d398b9c06827137ab0&format=json")).then(function(t){return t.json()}).then(function(e){var r=e.toptracks.track;return{name:a,photo:n[3]["#text"],tracklist:r.map(function(t){var e=t.name,n=t.playcount;return{name:e,likeCount:parseInt(n)}}).sort(t.orderByLikeCount)}})}))}).then(function(e){t.setState({artists:e})})}},{key:"render",value:function(){var t=this;return r.a.createElement(a.Fragment,null,r.a.createElement("header",null,r.a.createElement(p.k,{variant:"h2",align:"center",color:"primary",gutterBottom:!0},"Ranking songs")),r.a.createElement("main",null,r.a.createElement(p.e,{container:!0,justify:"center"},this.state.artists.length?r.a.createElement(p.e,{item:!0,xs:12,sm:9,md:6,lg:5},r.a.createElement(p.j,{elevation:0},r.a.createElement(p.e,{container:!0},r.a.createElement(p.e,{item:!0,xs:12},r.a.createElement(p.e,{container:!0,direction:"row",alignItems:"center",justify:"space-around"},r.a.createElement(p.e,{item:!0},r.a.createElement(p.a,{mini:!0,variant:"fab",color:"primary","aria-label":"Before",onClick:function(){return t.updateCurrentPosition(-1)},disabled:!this.state.currentPosition},r.a.createElement(d.b,null))),r.a.createElement(p.e,{item:!0,xs:6},r.a.createElement(f,{currentArtist:this.state.artists[this.state.currentPosition].name,currentPhoto:this.state.artists[this.state.currentPosition].photo})),r.a.createElement(p.e,{item:!0},r.a.createElement(p.a,{mini:!0,variant:"fab",color:"primary","aria-label":"Next",onClick:function(){return t.updateCurrentPosition(1)},disabled:this.state.currentPosition===this.state.artists.length-1},r.a.createElement(d.c,null))))),r.a.createElement(p.e,{item:!0,xs:12},r.a.createElement(k,{currentTracklist:this.state.artists[this.state.currentPosition].tracklist,updateLikeCount:this.updateLikeCount}))))):r.a.createElement(p.d,{color:"secondary"}))))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var b=Object(c.createMuiTheme)({palette:{type:"light"},typography:{useNextVariants:!0}});console.log(b),i.a.render(r.a.createElement(c.MuiThemeProvider,{theme:b},r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[5387,2,1]]]);
//# sourceMappingURL=main.2b78a0ca.chunk.js.map